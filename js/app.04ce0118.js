(function(){"use strict";var e={26:function(e,t,i){var s=i(963),r=i(252);const a={class:"container"};function n(e,t,i,n,o,m){const d=(0,r.up)("Header"),l=(0,r.up)("CreateItem"),c=(0,r.up)("Items");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r.Wm)(d,{title:"Breweries",showCreateForm:o.showCreateForm,onToggle_create_form:t[0]||(t[0]=e=>m.toggleCreateForm())},null,8,["showCreateForm"]),(0,r.wy)((0,r._)("div",null,[(0,r.Wm)(l,{onAddItem:m.addItem,onEditItem:m.UpdateItem,editMode:o.editMode,curEditItem:o.curEditItem,curItemState:o.curItemState},null,8,["onAddItem","onEditItem","editMode","curEditItem","curItemState"])],512),[[s.F8,o.showCreateForm]]),(0,r.Wm)(c,{onDeleteItem:m.deleteItem,onStartEditItem:m.startEditItem,items:o.items},null,8,["onDeleteItem","onStartEditItem","items"])])}var o=i(577);function m(e,t,i,s,a,n){const m=(0,r.up)("Button");return(0,r.wg)(),(0,r.iD)("header",null,[(0,r._)("h1",null,(0,o.zw)(i.title)+" Dispay",1),(0,r.Wm)(m,{text:i.showCreateForm?"close":"add new",color:i.showCreateForm?"LightSkyBlue":"purple",onBtnClick:t[0]||(t[0]=t=>e.$emit("toggle_create_form"))},null,8,["text","color"])])}function d(e,t,i,s,a,n){return(0,r.wg)(),(0,r.iD)("button",{onClick:t[0]||(t[0]=e=>n.onClick()),style:(0,o.j5)({background:i.color}),class:"btn"},(0,o.zw)(i.text),5)}var l={name:"Button",props:{text:String,color:String},methods:{onClick(){this.$emit("btn-click")}}},c=i(744);const h=(0,c.Z)(l,[["render",d]]);var u=h,p={name:"Header",props:{title:String,showCreateForm:Boolean},components:{Button:u},emits:["toggle_create_form"]};const w=(0,c.Z)(p,[["render",m],["__scopeId","data-v-4bb32cfd"]]);var b=w;const I=e=>((0,r.dD)("data-v-b8e28fee"),e=e(),(0,r.Cn)(),e),y={class:"form-control"},f=I((()=>(0,r._)("label",{for:"name"}," Name: ",-1))),_={class:"form-control"},v=I((()=>(0,r._)("label",{for:"state"}," state: ",-1))),C={class:"form-control"},g=I((()=>(0,r._)("label",{for:"city"}," city: ",-1))),E={class:"form-control"},S=I((()=>(0,r._)("label",{for:"street"}," street: ",-1))),k=["value"];function x(e,t,i,a,n,o){return(0,r.wg)(),(0,r.iD)("form",{class:"create-form",onSubmit:t[5]||(t[5]=(...e)=>o.onSubmit&&o.onSubmit(...e))},[(0,r._)("div",y,[f,(0,r.wy)((0,r._)("input",{type:"text",name:"name","onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e),id:"name",placeholder:"Add new Item name"},null,512),[[s.nr,n.name]])]),(0,r._)("div",_,[v,(0,r.wy)((0,r._)("input",{type:"text",name:"state","onUpdate:modelValue":t[1]||(t[1]=e=>n.state=e),id:"state",placeholder:"Add state"},null,512),[[s.nr,n.state]])]),(0,r._)("div",C,[g,(0,r.wy)((0,r._)("input",{type:"text",name:"city","onUpdate:modelValue":t[2]||(t[2]=e=>n.city=e),id:"city",placeholder:"Add city"},null,512),[[s.nr,n.city]])]),(0,r._)("div",E,[S,(0,r.wy)((0,r._)("input",{type:"text",name:"street","onUpdate:modelValue":t[3]||(t[3]=e=>n.street=e),id:"street",placeholder:"Add street"},null,512),[[s.nr,n.street]])]),(0,r._)("input",{type:"submit",value:[i.editMode?"update":"save"],onClick:t[4]||(t[4]=(...e)=>o.onSubmit&&o.onSubmit(...e)),class:"btn btn-block"},null,8,k)],32)}var $={name:"CreateItem",props:{editMode:Boolean,curEditItem:Object,curItemState:String},data(){return{id:"",state:"",city:"",street:"",name:""}},watch:{curEditItem:{handler(e,t){this.editMode&&(this.id=this.curEditItem.id,this.name=this.curEditItem.details.name,this.state=this.curItemState,this.city=this.curEditItem.details.city,this.street="null"!=this.curEditItem.details.street?this.curEditItem.details.street:""),this.editMode||(this.id="",this.state="",this.city="",this.street="",this.name="")},immediate:!0}},methods:{onSubmit(e){if(e.preventDefault(),!this.name)return void alert("Please add name");if(!this.state)return void alert("Please add a state");if(!this.city)return void alert("Please add a city");const t={id:this.id,state:this.capitalizeEachWord(this.state),city:this.capitalizeEachWord(this.city),street:this.street,name:this.capitalizeEachWord(this.name)};this.editMode?(console.log("new item is: ",t),this.$emit("edit-item",t)):(t.id=`${t.name}-$${t.city}-${t.state}`.replace(/ /gi,"-"),this.$emit("add-item",t)),this.id="",this.state="",this.city="",this.street="",this.name=""},capitalizeEachWord(e){e=e.trim();const t=e.split(" ");for(let i=0;i<t.length;i++)t[i]=t[i][0].toUpperCase()+t[i].substr(1).trim().toLowerCase();return t.join(" ")}}};const O=(0,c.Z)($,[["render",x],["__scopeId","data-v-b8e28fee"]]);var j=O;const D={class:"state-headline"};function F(e,t,i,s,a,n){const m=(0,r.up)("State");return(0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.items,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:(0,o.C_)([e.breweries.length?"":"hidden"])},[(0,r._)("h3",D,(0,o.zw)(e.state),1),(0,r.Wm)(m,{stateBreweries:e.breweries,state_name:e.state,state_key:t,onDeleteItem:n.deleteItem,onStartEditItem:n.startEditItem},null,8,["stateBreweries","state_name","state_key","onDeleteItem","onStartEditItem"])],2)))),128)}function M(e,t,i,s,a,n){const o=(0,r.up)("Item");return(0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.stateBreweries,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t},[(0,r.Wm)(o,{item:e,state_name:i.state_name,state_key:i.state_key,brewery_key:t,onDeleteItem:n.deleteItem,onStartEditItem:n.startEditItem},null,8,["item","state_name","state_key","brewery_key","onDeleteItem","onStartEditItem"])])))),128)}function B(e,t,i,s,a,n){return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["New York"==i.state_name?"new_york":"","card"])},[(0,r._)("h3",null,[(0,r._)("span",null,(0,o.zw)(i.item.details.name),1),(0,r._)("i",{class:"fas fa-times",onClick:t[0]||(t[0]=t=>e.$emit("delete-item",i.item.id,i.state_key,i.brewery_key))}),(0,r._)("i",{class:"fas fa-edit",onClick:t[1]||(t[1]=t=>e.$emit("start-edit-item",i.item,i.state_key,i.brewery_key))})]),(0,r._)("p",null,(0,o.zw)("null"!==i.item.details.street&&""!==i.item.details.street&&void 0!=i.item.details.street?i.item.details.street+", ":"")+" "+(0,o.zw)(i.item.details.city)+", "+(0,o.zw)(i.state_name),1)],2)}var A={name:"Item",props:{item:Object,state_name:String,state_key:Number,brewery_key:Number},emits:["delete-item","start-edit-item"]};const z=(0,c.Z)(A,[["render",B]]);var L=z,W={name:"State",props:{stateBreweries:Array,state_name:String,state_key:Number},components:{Item:L},emits:["deleteItem","startEditItem"],methods:{deleteItem(e,t,i){this.$emit("deleteItem",e,t,i)},startEditItem(e,t,i){this.$emit("startEditItem",e,t,i)}}};const N=(0,c.Z)(W,[["render",M]]);var U=N,Z={name:"Items",props:{items:Array},components:{State:U},emits:["deleteItem","startEditItem"],methods:{deleteItem(e,t,i){this.$emit("deleteItem",e,t,i)},startEditItem(e,t,i){this.$emit("startEditItem",e,t,i)}}};const H=(0,c.Z)(Z,[["render",F]]);var P=H,V={name:"App",components:{Header:b,CreateItem:j,Items:P},data(){return{mainObj:{},items:[],showCreateForm:!0,editMode:!1,curEditItem:{},curItemState:"",stateIndex:-1,breweryIndex:-1}},methods:{async fetchItems(){const e=await fetch("https://api.openbrewerydb.org/breweries"),t=await e.json();let i=[...new Set(t.map((e=>e.state)))];const s={states:{}};for(let r of i)s.states[`${r}`]={stateName:`${r}`,breweries:{}};for(let r of t)s.states[`${r.state}`].breweries[`${r.id}`]={city:`${r.city}`,street:`${r.street}`,name:`${r.name}`};console.log(s),this.mainObj=s},addItem(e){let t=this.binarySearch(this.items,0,this.items.length-1,e,this.statesCompare),i=t.pos;if(t.res){let t=this.binarySearch(this.items[i].breweries,0,this.items[i].breweries.length-1,{id:e.id,details:e},this.breweriesCompare);if(t.res)return alert(`A Brewery named ${e.name} already exist in ${e.city}, ${e.state}, No save accure`),0;{let s=t.pos,r={city:e.city,street:e.street,name:e.name};this.mainObj.states[e.state].breweries[e.id]=r,this.items[i].breweries.splice(s,0,{id:e.id,details:r})}}else{let t={city:`${e.city}`,street:`${e.street}`,name:`${e.name}`};this.mainObj.states[e.state]={stateName:e.state,breweries:{}},this.mainObj.states[e.state].breweries[e.id]=t,this.items.splice(i,0,{state:`${e.state}`,breweries:[{id:`${e.id}`,details:t}]})}return console.log("mainObj arr is: ",this.mainObj),console.log("items arr is: ",this.items),1},deleteItem(e,t,i){if(confirm("Are you sure?")){let s=this.items[t];delete this.mainObj.states[s.state].breweries[e],this.items[t].breweries.splice(i,1)}},startEditItem(e,t,i){this.editMode&&this.curEditItem.id===e.id?(this.editMode=!1,this.curEditItem=null):(this.editMode=!0,this.curEditItem=e,this.curItemState=this.items[t].state,this.stateIndex=t,this.breweryIndex=i,this.showCreateForm=!0)},UpdateItem(e){if(e.state.toUpperCase()==this.curItemState.toUpperCase()){let t=this.items[this.stateIndex].breweries[this.breweryIndex].details,i=t.street;if(t.street=e.street,t.city!=e.city||t.name!=e.name){let s=this.binarySearch(this.items[this.stateIndex].breweries,0,this.items[this.stateIndex].breweries.length-1,{id:e.id,details:e},this.breweriesCompare);if(s.res)alert(`A Brewery named ${e.name} already exist in ${e.city}, ${e.state}, No saving accure`),t.street=i;else{t.city=e.city,t.name=e.name,this.items[this.stateIndex].breweries.splice(this.breweryIndex,1);let i=this.Index<s.pos?s.pos-1:s.pos;this.items[this.stateIndex].breweries.splice(i,0,{id:e.id,details:t})}}this.editMode=!1,this.curEditItem=null}else this.addItem(e)&&(delete this.mainObj.states[this.curItemState].breweries[e.id],this.stateIndex=this.items[this.stateIndex].state==this.curItemState?this.stateIndex:this.stateIndex+1,this.items[this.stateIndex].breweries.splice(this.breweryIndex,1),this.editMode=!1,this.curEditItem=null);console.log("mainObj arr is: ",this.mainObj),console.log("items arr is: ",this.items)},toggleCreateForm(){this.showCreateForm=!this.showCreateForm},binarySearch(e,t,i,s,r){if(i<t)return{res:!1,pos:t};let a=Math.trunc((t+i)/2);return r(e[a],s)?r(e[a],s)<0?this.binarySearch(e,a+1,i,s,r):this.binarySearch(e,t,a-1,s,r):{res:!0,pos:a}},statesCompare(e,t){return e.state.toLowerCase().localeCompare(t.state.toLowerCase())},breweriesCompare(e,t){return e.details.city.toLowerCase()==t.details.city.toLowerCase()?e.details.name.toLowerCase().localeCompare(t.details.name.toLowerCase()):e.details.city.toLowerCase().localeCompare(t.details.city.toLowerCase())}},async created(){await this.fetchItems(),this.items=Object.keys(this.mainObj.states).map((e=>({state:e,breweries:[]})));let e=0;for(let t in this.mainObj.states){for(let i in this.mainObj.states[t].breweries)this.items[e].breweries.push({id:i,details:this.mainObj.states[t].breweries[i]});this.items[e].breweries.sort(this.breweriesCompare),e++}this.items.sort(this.statesCompare),this.showCreateForm=!0,this.editMode=!1,this.curEditItem={}}};const T=(0,c.Z)(V,[["render",n]]);var Y=T;(0,s.ri)(Y).mount("#app")}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,i),a.exports}i.m=e,function(){var e=[];i.O=function(t,s,r,a){if(!s){var n=1/0;for(l=0;l<e.length;l++){s=e[l][0],r=e[l][1],a=e[l][2];for(var o=!0,m=0;m<s.length;m++)(!1&a||n>=a)&&Object.keys(i.O).every((function(e){return i.O[e](s[m])}))?s.splice(m--,1):(o=!1,a<n&&(n=a));if(o){e.splice(l--,1);var d=r();void 0!==d&&(t=d)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[s,r,a]}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,a,n=s[0],o=s[1],m=s[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(m)var l=m(i)}for(t&&t(s);d<n.length;d++)a=n[d],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(l)},s=self["webpackChunkbreweries_app"]=self["webpackChunkbreweries_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(26)}));s=i.O(s)})();
//# sourceMappingURL=app.04ce0118.js.map